<?xml version="1.0" encoding="ISO-8859-1"?>
<chapter id="StandAloneServer">
<chapterinfo>
	&author.jht;
        <author>&person.sgw;<contrib>Deutsche Übersetzung</contrib></author>
</chapterinfo>
<title>Stand-alone-Server</title>

<para>
Stand-alone-Server sind im Netzwerk unabhängig von Domänen-Controllern.
Sie sind keine Domänen-Mitglieder und funktionieren eher wie
Arbeitsgruppen-Server. In vielen Fällen wird ein Stand-alone-Server mit einem
Minimum an Sicherheits-Kontrolle konfiguriert, mit der Absicht, daß alle Daten
für alle Benutzer frei zugänglich sein sollen.
</para>

<sect1>
<title>Eigenschaften und Vorteile</title>

<para>
Stand-alone-Server können so sicher oder so unsicher gemacht werden, wie es die
Anforderungen vorgeben. Sie können simple oder komplexe Konfigurationen haben.
Generell, trotz all dem Trara um Domänen-Sicherheit, bleiben sie eine sehr gängige
Installationsform.
</para>

<para>
Wenn alles, was gebraucht wird, ein Server mit read-only-Dateien ist, oder ein Server
nur für Drucker, dann macht es keinen Sinn, eine komplexe Installation aufzusetzen.
Zum Beispiel: Ein Zeichenbüro muß alte Zeichnungen und Referenz-Standard-Dateien speichern.
Niemand kann Dateien auf den Server schreiben, da es gesetzgebend wichtig ist, daß alle
Dokumente unverändert bleiben. Ein Stand-alone-Server im read-only Freigaben-Modus ist
eine ideale Lösung.
</para>

<para>
Eine andere Situation, die Einfachheit garantiert, ist ein Büro, das viele Drucker hat,
die von einem einzelnen zentralen Server angesteuert werden. Jeder muß auf die Drucker
drucken können, es gibt keinen Grund, irgendwelche Zugriffskontrolle einzusetzen,
und keine Dateien werden vom Druckserver bereitgestellt. Wieder ist ein Stand-alone-Server
im Freigaben-Modus (share) eine großartige Lösung.
</para>
</sect1>

<sect1>
<title>Hintergrund</title>

<para>
Der Begriff <emphasis>Stand-alone-Server</emphasis> bedeutet, daß er
lokale Authentifikation und Zugriffs-Kontrolle für alle Ressourcen, die über ihn 
zugänglich sind, anbietet. Allgemein bedeutet das, daß es eine lokale Benutzer-Datenbank
geben wird. In mehr technischen Begriffen bedeutet es, daß Ressourcen auf der Maschine
entweder im SHARE- oder im USER-Modus verfügbar gemacht werden.
</para>

<para>
Es ist nichts weiter nötig als das Anlegen von Benutzerkonten.
Stand-alone-Server bieten keine Netzwerk-Anmelde-Dienste an. Das bedeutet, daß Maschinen, die
diesen Server benutzen, keine Domänen-Anmeldung auf ihm durchführen. Welchem Anmeldedienst
diese Workstations unterstellt sind, ist unabhängig von dieser Maschine. Es ist aber notwendig,
jeden Netzwerk-Benutzer dahingehend "unterzubringen", daß der zur Anmeldung benutzte Namen lokal
auf dem Samba-Stand-alone-Server auf einen lokal bekannten Benutzernamen übersetzt (mapped) wird.
Es gibt verschiedene Arten, auf die dies geschehen kann.
</para>

<para>
Samba neigt dazu, die Unterscheidung etwas zu verwischen, was den Begriff des Stand-alone-Servers 
angeht. Dies rührt daher, daß die Authentifikations-Datenbank lokal oder auf einem Netzwerk-Server
liegen kann, sogar wenn der Samba-Server aus der SMB-Protokoll-Perspektive kein Mitglied des
Domänen-Sicherheits-Kontexts ist.
</para>

<para>
Durch die Verwendung von Pluggable Authentication Modules (PAM) und dem Namens-Service-Switcher
(NSSWITCH, welcher die UNIX-Benutzer-Datenbank verwaltet) kann die Wurzel der Authentifikation
auf einem anderen Server liegen. Wir würden dies den Authentifikations-Server nennen.
Das bedeutet, daß der Samba-Server die lokale UNIX/Linux-Passwort-DB verwenden kann
(<filename>/etc/passwd</filename> oder <filename>/etc/shadow</filename>), die lokale Datei
smbpasswd, oder ein LDAP-Backend, oder sogar via PAM und Winbind einen anderen CIFS/SMB-Server.
</para>

</sect1>

<sect1>
<title>Beispiel-Konfiguration</title>

<para>
Die Beispiele, <link linkend="simplynice"/>, and link linkend="SimplePrintServer"/>,
wurden entworfen, um Einfachheit zu inspirieren. Es ist oft gar zu leicht, einen hohen
Grad an Kreativität anzustreben, und damit zu viel Komplexität ins Design von Server und
Netzwerk zu bringen.
</para>

<sect2 id="RefDocServer">
<title>Referenz-Dokumentations-Server</title>

<para>
Configuration of a read-only data server that everyone can access is very simple.
<link linkend="simplynice"/> is the &smb.conf; file that will do this. Assume that all the reference documents
are stored in the directory <filename>/export</filename>, and the documents are owned by a user other than
nobody. No home directories are shared, and there are no users in the <filename>/etc/passwd</filename>
UNIX system database. This is a simple system to administer.
</para>

<smbconfexample id="simplynice">
<title>smb.conf for Reference Documentation Server</title>
<smbconfcomment> Global parameters</smbconfcomment>
<smbconfsection>[global]</smbconfsection>
<smbconfoption><name>workgroup</name><value>&example.workgroup;</value></smbconfoption>
<smbconfoption><name>netbios name</name><value>&example.server.samba;</value></smbconfoption>
<smbconfoption><name>security</name><value>SHARE</value></smbconfoption>
<smbconfoption><name>passdb backend</name><value>guest</value></smbconfoption>
<smbconfoption><name>wins server</name><value>192.168.1.1</value></smbconfoption>
<smbconfsection>[data]</smbconfsection>
<smbconfoption><name>comment</name><value>Data</value></smbconfoption>
<smbconfoption><name>path</name><value>/export</value></smbconfoption>
<smbconfoption><name>guest only</name><value>Yes</value></smbconfoption>
</smbconfexample>

<para>
In <link linkend="simplynice"/> above, the machine name is set to &example.server.samba;, the workgroup is set to the name
of the local workgroup (&example.workgroup;) so the machine will appear together with systems with
which users are familiar. The only password backend required is the <quote>guest</quote> backend to allow default
unprivileged account names to be used. As there is a WINS server on this networki, we of obviously make use of it.
</para>

</sect2>

<sect2 id="SimplePrintServer">
<title>Central Print Serving</title>

<para>
Configuration of a simple print server is easy if you have all the right tools
on your system.
</para>

<orderedlist>
<title> Assumptions:</title>
	<listitem><para>
	The print server must require no administration.
	</para></listitem>

	<listitem><para>
	The print spooling and processing system on our print server will be CUPS.
	(Please refer to <link linkend="CUPS-printing"></link> for more information).
	</para></listitem>

	<listitem><para>
	The print server will service only network printers. The network administrator
	will correctly configure the CUPS environment to support the printers.
	</para></listitem>

	<listitem><para>
	All workstations will use only postscript drivers. The printer driver
	of choice is the one shipped with the Windows OS for the Apple Color LaserWriter.
	</para></listitem>
</orderedlist>

<para>
In this example our print server will spool all incoming print jobs to
<filename>/var/spool/samba</filename> until the job is ready to be submitted by
Samba to the CUPS print processor. Since all incoming connections will be as
the anonymous (guest) user, two things will be required:
</para>

<itemizedlist>
<title>Enabling Anonymous Printing</title>
	<listitem><para>
	The UNIX/Linux system must have a <command>guest</command> account.
	The default for this is usually the account <command>nobody</command>.
	To find the correct name to use for your version of Samba, do the 
	following:
<screen>
&prompt;<userinput>testparm -s -v | grep "guest account"</userinput>
</screen>
	Make sure that this account exists in your system password
	database (<filename>/etc/passwd</filename>).
	</para></listitem>

	<listitem><para>
	The directory into which Samba will spool the file must have write
	access for the guest account. The following commands will ensure that
	this directory is available for use:
<screen>
&rootprompt;<userinput>mkdir /var/spool/samba</userinput>
&rootprompt;<userinput>chown nobody.nobody /var/spool/samba</userinput>
&rootprompt;<userinput>chmod a+rwt /var/spool/samba</userinput>
</screen>
	</para></listitem>
</itemizedlist>

<para>
The contents of the &smb.conf; file is shown in <link linkend="AnonPtrSvr"/>.
</para>

<para>
<smbconfexample id="AnonPtrSvr">
<title>&smb.conf; for Anonymous Printing</title>
<smbconfcomment> Global parameters</smbconfcomment>
<smbconfsection>[global]</smbconfsection>
<smbconfoption><name>workgroup</name><value>&example.workgroup;</value></smbconfoption>
<smbconfoption><name>netbios name</name><value>&example.server.samba;</value></smbconfoption>
<smbconfoption><name>security</name><value>SHARE</value></smbconfoption>
<smbconfoption><name>passdb backend</name><value>guest</value></smbconfoption>
<smbconfoption><name>printing</name><value>cups</value></smbconfoption>
<smbconfoption><name>printcap name</name><value>cups</value></smbconfoption>

<smbconfsection>[printers]</smbconfsection>
<smbconfoption><name>comment</name><value>All Printers</value></smbconfoption>
<smbconfoption><name>path</name><value>/var/spool/samba</value></smbconfoption>
<smbconfoption><name>printer admin</name><value>root</value></smbconfoption>
<smbconfoption><name>guest ok</name><value>Yes</value></smbconfoption>
<smbconfoption><name>printable</name><value>Yes</value></smbconfoption>
<smbconfoption><name>use client driver</name><value>Yes</value></smbconfoption>
<smbconfoption><name>browseable</name><value>No</value></smbconfoption>
</smbconfexample>
</para>


<note><para>
<indexterm><primary>MIME</primary><secondary>raw</secondary></indexterm>
<indexterm><primary>raw printing</primary></indexterm>
On CUPS-enabled systems there is a facility to pass raw data directly to the printer without
intermediate processing via CUPS print filters. Where use of this mode of operation is desired,
it is necessary to configure a raw printing device. It is also necessary to enable the raw mime
handler in the <filename>/etc/mime.conv</filename> and <filename>/etc/mime.types</filename>
files. Refer to <link linkend="cups-raw"></link>.
</para></note>

</sect2>

</sect1>

<sect1>
<title>Common Errors</title>

<para>
The greatest mistake so often made is to make a network configuration too complex.
It pays to use the simplest solution that will meet the needs of the moment.
</para>

</sect1>
</chapter>
