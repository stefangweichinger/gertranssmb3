<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 22. Fortgeschrittenes Netzwerk-Management</title><link rel="stylesheet" href="samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.61.3"><link rel="home" href="index.html" title="Samba HOWTO Collection"><link rel="up" href="optional.html" title="Part III. Erweiterte Konfiguration"><link rel="previous" href="winbind.html" title="Chapter 21. Winbind: Benutzung von Domänenkonten"><link rel="next" href="PolicyMgmt.html" title="Chapter 23. System and Account Policies"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 22. Fortgeschrittenes Netzwerk-Management</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="winbind.html">Prev</a> </td><th width="60%" align="center">Part III. Erweiterte Konfiguration</th><td width="20%" align="right"> <a accesskey="n" href="PolicyMgmt.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="AdvancedNetworkManagement"></a>Chapter 22. Fortgeschrittenes Netzwerk-Management</h2></div><div><div class="author"><h3 class="author"><span class="firstname">John</span> <span class="othername">H.</span> <span class="surname">Terpstra</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><tt class="email">&lt;<a href="mailto:jht@samba.org">jht@samba.org</a>&gt;</tt></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">Stefan</span> <span class="othername">G.</span> <span class="surname">Weichinger</span></h3><span class="contrib">Deutsche Übersetzung</span><div class="affiliation"><span class="orgname">German Samba-3-Docs-Translation Team<br></span><div class="address"><p><tt class="email">&lt;<a href="mailto:monitor@oops.co.at">monitor@oops.co.at</a>&gt;</tt></p></div></div></div></div><div><p class="pubdate">April 3 2003</p></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><a href="AdvancedNetworkManagement.html#id2954026">Eigenschaften und Vorzüge</a></dt><dt><a href="AdvancedNetworkManagement.html#id2954065">Server-Fernwartung</a></dt><dt><a href="AdvancedNetworkManagement.html#id2954209">Desktop-Fernwartung</a></dt><dd><dl><dt><a href="AdvancedNetworkManagement.html#id2954226">Fernwartung von NoMachine.Com</a></dt></dl></dd><dt><a href="AdvancedNetworkManagement.html#id2954532">"Magie" von Netzwerk-Anmelde-Skripten</a></dt><dd><dl><dt><a href="AdvancedNetworkManagement.html#id2954800">Hinzufügen von Druckern ohne Benutzer-Eingriff</a></dt></dl></dd></dl></div><p>
Dieser Abschnitt dokumentiert Randthemen, die sehr wichtig für Netzwerkadministratoren sind,
die die Zugriffskontrolle auf Netzwerk-Ressourcen verbessern wollen, die Benutzerumgebung
automatisieren, und ihr Leben ein wenig erleichtern wollen.
</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2954026"></a>Eigenschaften und Vorzüge</h2></div></div><div></div></div><p>
Oft kann der Unterschied zwischen einer funktionierenden Netzwerkumgebung und einer als
gut wahr- und angenommenen am Besten durch die <span class="emphasis"><em>Kleinigkeiten</em></span>
gemessen werden, die alles noch harmonischer arbeiten lassen. Eine Schlüsselrolle jeder
Netzwerklösung ist die Fähigkeit, per Fernzugriff MS Windows Workstations zu warten,
über das Netz auf den Samba-Server zugreifen zu können, angepasste Anmelde-Skripts zur
Verfügung zu stellen, genauso wie andere "Hausarbeiten", die helfen, verlässlicheren
Netzwerk-Betrieb zu erreichen.
</p><p>
Dieses Kapitel präsentiert Informationen zu jedem dieser Bereiche. Sie wurden hier, und
nicht in anderen Kapiteln, plaziert, um das Nachschlagen zu erleichtern.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2954065"></a>Server-Fernwartung</h2></div></div><div></div></div><p>&#8220;<span class="quote">Wie bekomme ich `User Manager' und `Server Manager'?</span>&#8221;</p><p>
<a class="indexterm" name="id2954083"></a>
<a class="indexterm" name="id2954092"></a>
<a class="indexterm" name="id2954100"></a>
Da ich ja keinen <span class="application">NT4 Server</span> kaufen muß, wie bekomme ich den
`User Manager for Domains' und den `Server Manager'?
</p><p>
<a class="indexterm" name="id2954123"></a>
Microsoft vertreibt eine Version dieser Tools namens <tt class="filename">Nexus.exe</tt>, zur
Installation auf <span class="application">Windows 9x/Me</span>-Systemen. Dieses Set enthält:
</p><div class="itemizedlist"><ul type="disc"><li>Server Manager</li><li>User Manager for Domains</li><li>Event Viewer</li></ul></div><p>
Laden Sie die Archivdatei von <a href="ftp://ftp.microsoft.com/Softlib/MSLFILES/NEXUS.EXE" target="_top">ftp://ftp.microsoft.com/Softlib/MSLFILES/NEXUS.EXE.</a>
</p><p>
<a class="indexterm" name="id2954181"></a>
Die <span class="application">Windows NT 4.0</span> Version des `User Manager for 
Domains' und `Server Manager' sind via ftp bei Microsoft erhältlich <a href="ftp://ftp.microsoft.com/Softlib/MSLFILES/SRVTOOLS.EXE" target="_top">ftp://ftp.microsoft.com/Softlib/MSLFILES/SRVTOOLS.EXE</a>.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2954209"></a>Desktop-Fernwartung</h2></div></div><div></div></div><p>
Es gibt eine Reihe von verfügbaren Desktop-Fernwartungs-Lösungen, die von gratis bis
teuer reichen. Lassen Sie sich davon nicht abhalten. Manchmal ist die teuerste Lösung
die kosten-effektivste. In jedem Fall müssen Sie Ihre eigenen Schlüsse ziehen, was die
beste Lösung für Ihr Netzwerk ist.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2954226"></a>Fernwartung von NoMachine.Com</h3></div></div><div></div></div><p>
	<a class="indexterm" name="id2954238"></a>
	Folgende Informationen wurden auf der Samba mailing list am 3.4.2003, um 23:33:50 GMT
	gepostet. Sie werden in abgewandelter Form präsentiert (mit fehlenden Autor-Details
	wegen Datenschutz).
	Die gesamte Antwort wird (bis auf ein paar Kommentare) gezeigt.
	</p><p>&#8220;<span class="quote">
		Ich habe einen wunderbaren Linux/Samba-Server als PDC laufen. Jetzt würde ich gerne
		Fernwartungs-Funktionen hinzufügen, sodaß Benutzer sich am System anmelden, und ihren
		Desktop von zuhause aus, oder aus dem Ausland erreichen können.		
		</span>&#8221;</p><p>&#8220;<span class="quote">
		Gibt es eine Möglichkeit, dies zu erreichen? Brauche ich einen Windows Terminal Server?
		Muß ich so konfigurieren, daß er Domänen-Mitglied ist, oder ein BDC, PDC? Gibt es
		irgendwelche hacks für Windows XP, um Fernzugriff zu aktivieren, auch wenn der Rechner
		in einer Domäne ist?
		</span>&#8221;</p><p>
		Gegebene Antwort: Prüfen Sie das neue Angebot von &#8220;<span class="quote">NX</span>&#8221;-Software von
		<a href="http://www.nomachine.com/" target="_top">NoMachine</a>.
		</p><p>
	Es implementiert ein leicht zu verwendendes Interface zum Remote-X-Protokoll genauso
	wie es VNC/RFB und rdesktop/RDP einschließt, dies jedoch mit einer Geschwindigkeit, wie
	sie sie wahrscheinlich noch nicht gesehen haben.
	</p><p>
	Remote X ist bei weitem nicht neu, aber was hier erreicht wurde, ist eine neue Art von
	Kompressions- und Caching-Technologie, die diese Software sogar über langsame 
	Modem/ISDN-Strecken ausreichend schnell laufen läßt.
	</p><p>
	Ich konnte ihre (öffentliche) RedHat-Maschine in Italien "testfahren", über eine
	belastete Internet-Verbindung, mit aktivierten Thumbnails im KDE Konqueror, welcher
	unverzüglich auf &#8220;<span class="quote">mouse-over</span>&#8221; ansprang. Von innerhalb dieser (remote X)
	Sitzung startete ich eine rdesktop-Sitzung auf eine weitere Windows XP Maschine.
	Um die Performance zu testen, spielte ich Pinball. Ich bin stolz, sagen zu dürfen,
	daß ich beim ersten Versuch 631750 Punkte erreichte.
	</p><p>
	NX arbeitet in meinem LAN besser als die anderen &#8220;<span class="quote">reinen</span>&#8221; Verbindungsarten,
	die ich von Zeit zu Zeit benutze: TightVNC, rdesktop oder Remote X.
	Es ist sogar schneller als eine direkte Crosslink-Verbindung zwischen 2 Knoten.	
	</p><p>
	Ich bekomme sogar Sound von der Remote-X-applikation auf meine lokalen Lautsprecher,
	und ich hatte ein funktionierendes &#8220;<span class="quote">copy'n'paste</span>&#8221; von einem NX-Fenster
	(in welchem eine KDE-Sitzung in Italien lief) in meinen Mozilla-Mail-Agenten. Diese
	Kerle machen definitiv etwas richtig!	
	</p><p>
	Ich empfehle jedem, der auch nur ein nebensächliches Interesse an Fernwartung hat,
	NX auszuprobieren:	
	<a href="http://www.nomachine.com/testdrive.php" target="_top">http://www.nomachine.com/testdrive.php</a>.
	</p><p>
	Einfach den kostenlosen Client downloaden (verfügbar für Red Hat, SuSE, Debian
	und Windows) und innerhalb 5 Minuten geht es los (es müssen allerdings erst
	die Zugangsdaten gesendet werden, weil Sie einen vollen UNIX-account auf deren
	testdrive.nomachine.com-Box erhalten).
	</p><p>
	Nomachine plant die Ausbaustufe, wo Sie NX-Applikations-Server als Cluster betreiben können,
	und die Benutzer starten einfach eine lokale NX-Session	und können Applikationen auswählen,
	die transparent laufen (Anwendungen können sogar auf einem anderen NX-Knoten laufen, aber
	vorgeben, auf demselben Knoten zu sein wie der, an dem sich der Benutzer angemeldet hat,
	weil es im selben Fenster angezeigt wird. Sie können sie auch full-screen ausführen, und
	nach kurzer Zeit vergessen Sie überhaupt, daß es eine Remote-Session ist).
	</p><p>
	Nun das Beste am Schluß: All die Kerntechnologien zur Kompression und zum Caching
	werden unter der GPL veröffentlicht, und sind als Sourcecode für jeden verfügbar,
	der darauf aufbauen will! Diese Technologien funktionieren, wenn auch nur von der
	Befehlszeile aus (und sehr unpraktisch zu gebrauchen, um eine voll funktionsfähige
	remote-X-session zum Laufen zu bringen.)
	</p><p>
	Um Ihre Fragen zu beantworten:	
	</p><div class="itemizedlist"><ul type="disc"><li><p>
		Sie müssen keinen Terminal-Server installieren; XP hat RDP-Unterstüzunng integriert.	
		</p></li><li><p>
		NX ist viel billiger als Citrix  und vergleichbar in der Performance, wenn
		nicht schneller.
		</p></li><li><p>
		Sie müssen XP nicht hacken  es funktioniert einfach.
		</p></li><li><p>
		Sie melden sich an der XP-Box transparent aus der Ferne an (und ich glaube, es gibt
		keinen Anlaß, etwas zu ändern, um eine Verbindung zu bekommen, sogar, wenn die
		Authentifikation an einer Domäne erfolgt).
		</p></li><li><p>
		Die NX-Kern-Technologien sind alle Open Source und unter der GPL 
		veröffentlicht. Sie können jetzt eine (sehr unbequeme) Befehlszeile ohne
		Kosten nutzen, aber Sie können ein komfortables (proprietäres) NX-GUI-Frontend
		kaufen.
		</p></li><li><p>
		NoMachine ermutigt und unterstützt OSS/Free Software-Implementierungen auch
		für ein solches Frontend, sogar wenn es für sie Konkurrenz bedeutet (sie haben
		dies sogar in den Entwickler-Listen für LTSP, KDE und GNOME geschrieben).		
		</p></li></ul></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2954532"></a>"Magie" von Netzwerk-Anmelde-Skripten</h2></div></div><div></div></div><p>
Es gibt mehrere Möglichkeiten, um eine angepasste Konfiguration der Netzwerk-Start-Umgebung zu schaffen.
</p><div class="itemizedlist"><ul type="disc"><li>Kein Anmelde-Skript.</li><li>Simples und universelles Anmelde-Skript, das für alle Benutzer verwendet wird.</li><li>Verwendung eines von Bedingungen abhängigen Skripts, das anhängig von Benutzer- oder Gruppen-Attributen angewendet wird.</li><li>Anwendung von Samba's preexec- und postexec-Funktionen beim Zugriff auf die NETLOGON-Freigabe,
	um ein angepasstes Anmelde-Skript zu generieren und auszuführen.</li><li>Verwendung eines Tools wie KixStart.</li></ul></div><p>
Der Quelltext-Tree von Samba inkludiert zwei Werkzeuge zum Generieren und Ausführen von Anmelde-Skripts.
Siehe im Verzeichnis <tt class="filename">examples</tt> die Sub-Verzeichnisse <tt class="filename">genlogon</tt>
und <tt class="filename">ntlogon</tt>. 
</p><p>
Die folgenden listings stammen aus dem Verzeichnis <tt class="filename">genlogon</tt>.
</p><p>
<a class="indexterm" name="id2954628"></a>
Dies ist die Datei <tt class="filename">genlogon.pl</tt>:

<font color="red">&lt;smbfile&gt;
<pre class="programlisting">
	#!/usr/bin/perl
	#
	# genlogon.pl
	#
	# Perl script to generate user logon scripts on the fly, when users
	# connect from a Windows client. This script should be called from 
	# smb.conf with the %U, %G and %L parameters. I.e:
	#
	#       root preexec = genlogon.pl %U %G %L
	#
	# The script generated will perform
	# the following:
	#
	# 1. Log the user connection to /var/log/samba/netlogon.log
	# 2. Set the PC's time to the Linux server time (which is maintained
	#    daily to the National Institute of Standards Atomic clock on the
	#    internet.
	# 3. Connect the user's home drive to H: (H for Home).
	# 4. Connect common drives that everyone uses.
	# 5. Connect group-specific drives for certain user groups.
	# 6. Connect user-specific drives for certain users.
	# 7. Connect network printers.

	# Log client connection
	#($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);
	($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);
	open LOG, "&gt;&gt;/var/log/samba/netlogon.log";
	print LOG "$mon/$mday/$year $hour:$min:$sec";
	print LOG " - User $ARGV[0] logged into $ARGV[1]\n";
	close LOG;

	# Start generating logon script
	open LOGON, "&gt;/shared/netlogon/$ARGV[0].bat";
	print LOGON "\@ECHO OFF\r\n";

	# Connect shares just use by Software Development group
	if ($ARGV[1] eq "SOFTDEV" || $ARGV[0] eq "softdev")
	{
		print LOGON "NET USE M: \\\\$ARGV[2]\\SOURCE\r\n";
	}

	# Connect shares just use by Technical Support staff
	if ($ARGV[1] eq "SUPPORT" || $ARGV[0] eq "support")
	{
		print LOGON "NET USE S: \\\\$ARGV[2]\\SUPPORT\r\n";
	}

	# Connect shares just used by Administration staff
	If ($ARGV[1] eq "ADMIN" || $ARGV[0] eq "admin")
	{
		print LOGON "NET USE L: \\\\$ARGV[2]\\ADMIN\r\n";
		print LOGON "NET USE K: \\\\$ARGV[2]\\MKTING\r\n";
	}

	# Now connect Printers. We handle just two or three users a little
	# differently, because they are the exceptions that have desktop
	# printers on LPT1: - all other user's go to the LaserJet on the
	# server.
	if ($ARGV[0] eq 'jim'
	    || $ARGV[0] eq 'yvonne')
	{
		print LOGON "NET USE LPT2: \\\\$ARGV[2]\\LJET3\r\n";
		print LOGON "NET USE LPT3: \\\\$ARGV[2]\\FAXQ\r\n";
	}
	else
	{
		print LOGON "NET USE LPT1: \\\\$ARGV[2]\\LJET3\r\n";
		print LOGON "NET USE LPT3: \\\\$ARGV[2]\\FAXQ\r\n";
	}

	# All done! Close the output file.
	close LOGON;
</pre>
&lt;/smbfile&gt;</font>
</p><p>
Diejenigen, die sich ein weiter ausgeführtes oder mächtigeres Anmeldungs-System wünschen, mögen
folgende Seiten aufsuchen:
</p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.craigelachie.org/rhacer/ntlogon" target="_top">http://www.craigelachie.org/rhacer/ntlogon</a></li><li><a href="http://www.kixtart.org" target="_top">http://www.kixtart.org</a></li></ul></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2954800"></a>Hinzufügen von Druckern ohne Benutzer-Eingriff</h3></div></div><div></div></div><p>
<a class="indexterm" name="id2954813"></a>
Drucker können automatisch während des Anmeldevorgangs hinzugefügt werden, durch Benutzung von:

</p><pre class="screen">
<tt class="prompt">C:\&gt; </tt><b class="userinput"><tt>rundll32 printui.dll,PrintUIEntry /?</tt></b>
</pre><p>

Siehe die Dokumentation in <a href="http://support.microsoft.com/default.asp?scid=kb;en-us;189105" target="_top">Microsoft knowledgebase article 189105.</a>
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="winbind.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="optional.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="PolicyMgmt.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 21. Winbind: Benutzung von Domänenkonten </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 23. System and Account Policies</td></tr></table></div></body></html>
