<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 33. Die Samba Checkliste</title><link rel="stylesheet" href="samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.64.1"><link rel="home" href="index.html" title="Samba HOWTO Collection"><link rel="up" href="troubleshooting.html" title="Part V. Troubleshooting"><link rel="previous" href="troubleshooting.html" title="Part V. Troubleshooting"><link rel="next" href="problems.html" title="Chapter 34. Analyse und Lösung von Problemen mit Samba"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 33. Die Samba Checkliste</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="troubleshooting.html">Prev</a> </td><th width="60%" align="center">Part V. Troubleshooting</th><td width="20%" align="right"> <a accesskey="n" href="problems.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="diagnosis"></a>Chapter 33. Die Samba Checkliste</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Andrew</span> <span class="surname">Tridgell</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><tt class="email">&lt;<a href="mailto:tridge@samba.org">tridge@samba.org</a>&gt;</tt></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">Jelmer</span> <span class="othername">R.</span> <span class="surname">Vernooij</span></h3><div class="affiliation"><span class="orgname">The Samba Team<br></span><div class="address"><p><tt class="email">&lt;<a href="mailto:jelmer@samba.org">jelmer@samba.org</a>&gt;</tt></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">Dan</span> <span class="surname">Shearer</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><tt class="email">&lt;<a href="mailto:dan@samba.org">dan@samba.org</a>&gt;</tt></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">Thomas</span> <span class="othername"></span> <span class="surname">Reiss</span></h3><span class="contrib">Deutsche Übersetzung</span><div class="affiliation"><span class="orgname">German Samba-3-Docs-Translation Team<br></span><div class="address"><p><tt class="email">&lt;<a href="mailto:thomas@mypoint.franken.de">thomas@mypoint.franken.de</a>&gt;</tt></p></div></div></div></div><div><p class="pubdate">Wed Jan 15</p></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="diagnosis.html#id2986890">Einleitung</a></span></dt><dt><span class="sect1"><a href="diagnosis.html#id2986944">Vorwort</a></span></dt><dt><span class="sect1"><a href="diagnosis.html#id2987194">Die Tests</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2986890"></a>Einleitung</h2></div></div><div></div></div><p>
Dieses Dokument beschreibt eine Reihe von Tests zur Überprüfung Ihres
Samba-Servers. Wenn bei den Tests Probleme festgestellt werden, bietet
es ferner Informationen über die möglichen Fehlerursachen.
Wurden alle Tests fehlerfrei durchgeführt, sollte alles einwandfrei
funktionieren.
</p><p>
Sie sollten alle Tests in der genannten Reihenfolge durchführen.
Es wurde sorgfältig versucht, die Reihenfolge so auszuwählen, 
dass nachfolgende Tests auf erfolgreich durchgeführte frühere Tests 
aufbauen.
Auch nachdem ein Fehler behoben wurde, sollten Sie immer alle
Tests komplett durchführen.
</p><p>
Wenn Sie eine E-Mail an eine der Samba-Mailing-Listen mit dem Inhalt
&#8220;<span class="quote">Es funktioniert nicht</span>&#8221; schicken, ohne diese Tests
durchgeführt zu haben, so wundern Sie sich bitte nicht, wenn Ihre E-Mail
ingoriert wird.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2986944"></a>Vorwort</h2></div></div><div></div></div><p>
In allen Tests wird davon ausgegangen, dass Sie einen Samba-Server
BIGSERVER und einen PC ACLIENT haben, welche sich in der Arbeitsgruppe
TESTGROUP befinden.
</p><p>
Das Vorgehen ist für andere Typen von Clients ähnlich.
</p><p>
Des weiteren wird angenommen, dass Sie den Namen einer verfügbaren Freigabe in Ihrer
<tt class="filename">smb.conf</tt> kennen. Ich werde hier die Freigabe mit dem Namen
<i class="parameter"><tt>tmp</tt></i> verwenden.
Sie können solch eine Freigabe durch folgende Zeilen erstellen <a href="diagnosis.html#tmpshare" title="Example 33.1. smb.conf mit [tmp] Freigabe">???</a>.
</p><div class="example"><a name="tmpshare"></a><p class="title"><b>Example 33.1. smb.conf mit [tmp] Freigabe</b></p><table class="simplelist" border="0" summary="Simple list"><tr><td> </td></tr><tr><td><i class="parameter"><tt>[tmp]</tt></i></td></tr><tr><td><i class="parameter"><tt>comment = temporary files</tt></i></td></tr><tr><td><i class="parameter"><tt>path = /tmp</tt></i></td></tr><tr><td><i class="parameter"><tt>read only = yes</tt></i></td></tr></table></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Diese Tests setzen Samba in der Version 3.0.0 oder später voraus.
Einige der genannten Befehle sind in früheren Samba-Versionen nicht
enthalten.
</p></div><p>
Bitte schenken Sie den gemeldeten Fehlermeldungen Ihre Aufmerksamkeit.
Sollten Sie eine Fehlermeldung erhalten, dass Ihr Server "unfriendly"
wäre, überprüfen Sie bitte, ob Ihre IP-Namensauflösung korrekt eingestellt
ist.
Stellen Sie sicher, dass in der Datei
<tt class="filename">/etc/resolv.conf</tt> ein korrekter Nameserver
eingetragen wurde.
</p><p>
Sollten Sie keinen DNS-Server einsetzen, überprüfen Sie, ob ihre
<tt class="filename">smb.conf</tt> die Zeile <span><b class="command">dns proxy = no</b></span> enthält.
Der beste Weg, das zu überprüfen, ist der Befehl <span><b class="command">testparm smb.conf</b></span>.
</p><p>
<a class="indexterm" name="id2987111"></a>
Es ist hilfreich, während der Tests die Log-Dateien in einem separatem
Konsolenfenster (mittels ctrl-alt-F1 bis F6 oder mehrere Fenster in X)
mittels <span><b class="command">tail -F log_file_name</b></span> zu überwachen.
Die wichtigen Log-Dateien finden Sie (in der Default Installation) 
unter <tt class="filename">/usr/local/samba/var</tt>.
Sie können hier des weiteren die Verbindunglogs von Computern finden
oder evtl. auch in <tt class="filename">/var/log/samba</tt>, je nachdem wie Sie es in
<tt class="filename">smb.conf</tt> angegeben haben.
</p><p>
Sollten Sie während der Tests Änderungen an der <tt class="filename">smb.conf</tt> durchführen,
vergessen Sie bitte nicht, <span class="application">smbd</span> und <span class="application">nmbd</span> neu zu starten.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2987194"></a>Die Tests</h2></div></div><div></div></div><div class="procedure"><p class="title"><b>Procedure 33.1. Diagnose Ihres Samba-Servers</b></p><ol type="1"><li><p>
<a class="indexterm" name="id2987218"></a>
Rufen Sie im Verzeichnis Ihrer <tt class="filename">smb.conf</tt> 
den Befehl <span><b class="command">testparm smb.conf</b></span> auf. Werden Fehler
angezeigt, ist Ihre <tt class="filename">smb.conf</tt> nicht in Ordnung.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Ihre <tt class="filename">smb.conf</tt> sollte in <tt class="filename">/etc/samba</tt> oder in
<tt class="filename">/usr/local/samba/lib</tt> zu finden sein.
</p></div></li><li><p>
Führen Sie auf Ihrem PC den Befehl <span><b class="command">ping BIGSERVER</b></span> und 
auf Ihrem Unix-Server den Befehl <span><b class="command">ping ACLIENT</b></span> 
aus. Erhalten Sie keine gültige Antwort, so ist TCP/IP nicht korrekt
eingerichtet.
</p><p>
Sie müssen an Ihrem PC eine &#8220;<span class="quote">DOS-Eingabeaufforderung</span>&#8221;
öffnen, um den Befehl ping auszuführen.
</p><p>
Erhalten Sie eine Meldung in der Art von &#8220;<span class="quote"><span class="errorname">host not found</span></span>&#8221;,
dann ist Ihre DNS-Konfiguration oder die Datei
<tt class="filename">/etc/hosts</tt> nicht in Ordnung. Es ist möglich, Samba
ohne DNS-Einträge für den Server oder die Clients zu betreiben, aber es
wird für die weiteren Tests davon ausgegangen, dass diese Einträge
korrekt sind.
</p><p>
Eine weitere Möglichkeit, warum ein ping nicht funktioniert, ist eine
vorhandene Firewall. Sie müssen die Regeln der Firewall dahingehend
anpassen, daß Sie die Workstation evtl. von einem anderen Subnetz 
zugreifen lassen können. 
Unter Linux können Sie dies mit den Firewall-Programmen
<span><b class="command">ipchains</b></span> oder <span><b class="command">iptables</b></span>
durchführen.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Moderne Linux-Distributionen installieren per Default ipchains/iptables.
Das ist ein gängiges Problem und wird gerne übersehen.
</p></div><p>
Möchten Sie die Firewallregeln des Testsystems überprüfen, rufen Sie
einfach 
<span><b class="command">iptables -L -v</b></span> oder bei <i class="parameter"><tt>ipchains</tt></i>-basierenden Firewalls 
<span><b class="command">ipchains -L -v</b></span> auf.
</p><p>
Hier ist eine beispielhafte Ausgabe eines System mit einer externen
Ethernet-Schnittstelle (eth1), an der Samba nicht aktiv ist, und einer
internen (Privates Netzwerk) Ethernet-Schnittstelle (eth0), an der Samba aktiv
ist.
</p><pre class="screen">
frodo:~ # iptables -L -v
Chain INPUT (policy DROP 98496 packets, 12M bytes)
 pkts bytes target     prot opt in     out     source     destination
 187K  109M ACCEPT     all  --  lo     any     anywhere   anywhere
 892K  125M ACCEPT     all  --  eth0   any     anywhere   anywhere
1399K 1380M ACCEPT     all  --  eth1   any     anywhere   anywhere  \
					state RELATED,ESTABLISHED

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source     destination
 978K 1177M ACCEPT     all  --  eth1   eth0    anywhere   anywhere \
					state RELATED,ESTABLISHED
 658K   40M ACCEPT     all  --  eth0   eth1    anywhere   anywhere
    0     0 LOG        all  --  any    any     anywhere   anywhere \
					LOG level warning

Chain OUTPUT (policy ACCEPT 2875K packets, 1508M bytes)
 pkts bytes target     prot opt in     out     source     destination

Chain reject_func (0 references)
 pkts bytes target     prot opt in     out     source     destinat
</pre><p>
</p></li><li><p>
Führen Sie auf Ihrer Unix-Box den Befehl <span><b class="command">smbclient -L BIGSERVER</b></span> aus.
Sie sollten eine Liste der verfügbaren Freigaben erhalten.
</p><p>
Sollten Sie ein Meldung &#8220;<span class="quote">Bad password</span>&#8221; erhalten, so dürfte
es sich um einen falschen Eintrag bei <i class="parameter"><tt>hosts allow</tt></i>,
<i class="parameter"><tt>hosts deny</tt></i> oder <i class="parameter"><tt>valid users</tt></i>
in Ihrer <tt class="filename">smb.conf</tt> handeln oder der guest account ist nicht gültig.

Überprüfen Sie mit <span class="application">testparm</span> Ihren guest account und entfernen Sie
testweise alle <i class="parameter"><tt>hosts allow</tt></i>, <i class="parameter"><tt>hosts
deny</tt></i>, <i class="parameter"><tt>valid users</tt></i> oder
<i class="parameter"><tt>invalid users</tt></i> Einträge.
</p><p>
Erhalten Sie eine Meldung &#8220;<span class="quote"><span class="errorname">connection refused</span></span>&#8221;, dann 
läuft der <span><b class="command">smbd</b></span> Prozess nicht.
Haben Sie diesen in <tt class="filename">inetd.conf</tt> eingetragen, so
stimmt evtl. dieser Eintrag nicht.
Haben Sie diesen als Dämon installiert, überprüfen Sie mit
<span><b class="command">netstat -a</b></span> ob dieser gestartet ist und das 
der netbios-ssn Port den Status LISTEN hat.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
<a class="indexterm" name="id2987580"></a>
<a class="indexterm" name="id2987588"></a>
Einige UNIX/Linux System verwenden <span><b class="command">xinetd</b></span> anstelle
von <span><b class="command">inetd</b></span>. Lesen Sie in Ihrer System-Dokumentation
die Infos über die entsprechende Implementation Ihres Netzwerk-Super-Dämons nach.
</p></div><p>
Erhalten Sie eine Meldung &#8220;<span class="quote"><span class="errorname">session request
failed</span></span>&#8221;, dann lehnt der Server eine Verbindung ab.
Lautet die Info &#8220;<span class="quote">Your server software is being unfriendly</span>&#8221;,
dann könnten Sie wahrscheinlich einen falschen Startparameter für
<span class="application">smbd</span> angegeben haben oder es besteht ein ähnliches grundsätzliches
Problem beim starten von <span class="application">smbd</span>.

Testen Sie mittels <span class="application">testparm</span> Ihre Config-Datei (<tt class="filename">smb.conf</tt>) 
auf Syntax-Fehler und dass die diversen Log- und Lock-Verzeichnisse von
Samba vorhanden sind.
</p><p>
Es gibt eine Menge von Gründen dafür, daß smbd eine Verbindung ablehnt oder
verweigert. Die häufigsten Gründe dürften bei folgenden Einträgen in der
<tt class="filename">smb.conf</tt> liegen <a href="diagnosis.html#modif1" title="Example 33.2. Konfiguration für erlaubte Verbindungen eines bestimmten Subnetzes">???</a>.
</p><p>
</p><div class="example"><a name="modif1"></a><p class="title"><b>Example 33.2. Konfiguration für erlaubte Verbindungen eines bestimmten Subnetzes</b></p><table class="simplelist" border="0" summary="Simple list"><tr><td> </td></tr><tr><td><i class="parameter"><tt>[globals]</tt></i></td></tr><tr><td>...</td></tr><tr><td><i class="parameter"><tt>hosts deny = ALL</tt></i></td></tr><tr><td><i class="parameter"><tt>hosts allow = xxx.xxx.xxx.xxx/yy</tt></i></td></tr><tr><td><i class="parameter"><tt>interfaces = eth0</tt></i></td></tr><tr><td><i class="parameter"><tt>bind interfaces only = Yes</tt></i></td></tr><tr><td>...</td></tr></table></div><p>
</p><p>
Im obigen Beispiel werden keinerlei Verbindungsanforderungen erlaubt, da
diese durch die Adresse des Loopback-Devices 127.0.0.1 ersetzt werden.
Um das Problem zu lösen, ändern Sie die folgenden Zeilen in <a href="diagnosis.html#modif2" title="Example 33.3. Konfiguration für erlaubte Verbindungen eines bestimmten Subnetzes und vom localhost">???</a>
</p><p>
</p><div class="example"><a name="modif2"></a><p class="title"><b>Example 33.3. Konfiguration für erlaubte Verbindungen eines bestimmten Subnetzes und vom localhost</b></p><table class="simplelist" border="0" summary="Simple list"><tr><td> </td></tr><tr><td><i class="parameter"><tt>[globals]</tt></i></td></tr><tr><td>...</td></tr><tr><td><i class="parameter"><tt>hosts deny = ALL</tt></i></td></tr><tr><td><i class="parameter"><tt>hosts allow = xxx.xxx.xxx.xxx/yy 127.</tt></i></td></tr><tr><td><i class="parameter"><tt>interfaces = eth0 lo</tt></i></td></tr><tr><td>...</td></tr></table></div><p>
</p><p>
<a class="indexterm" name="id2987860"></a>
Eine weitere oft vorkommende Ursache dieser 2 Fehlermeldungen ist ein
bereits laufender <a class="indexterm" name="id2987870"></a> an
port <tt class="constant">139</tt>, etwa ein durch <span class="application">inetd</span> 
gestarteter Samba-Dämon <span class="application">smbd</span> oder etwas vergleichbares wie 
Digital's Pathworks. Überprüfen Sie daher vor dem Start von <span class="application">smbd</span> als
Dämon  Ihre <tt class="filename">inetd.conf</tt>, um eine Menge Frustration zu
vermeiden.
</p><p>
Eine weitere mögliche Ursache für ein Scheitern dieses Tests besteht
darin, dass die Subnetz-Maske und/oder die Broadcast-Adresse nicht
korrekt ist. Bitte überprüfen Sie daher die korrekte Broadcast/Subnetz-
Maske Ihres Netzwerkinterfaces und dass Samba diese Einstellungen in der
<tt class="filename">log.nmbd</tt> Datei bestätigt.
</p></li><li><p>
Führen Sie den Befehl <span><b class="command">nmblookup -B BIGSERVER __SAMBA__</b></span> aus.
Sie sollten die IP-Adresse Ihres Samba-Servers gemeldet bekommen.
</p><p>
Wenn nicht, ist nmbd nicht korrekt installiert. Überprüfen Sie Ihre
<tt class="filename">inetd.conf</tt>, wenn er durch inetd gestartet wird, oder
ob er als Dämon läuft und an udp-Port 137 lauscht.
</p><p>
Ein häufiges Problem sind inetd-Implementationen, welche nicht mehrere
Parameter an der Kommandozeile verarbeiten können.
Ist das bei Ihnen der Fall, erstellen Sie ein einzeiliges Skript mit den
richtigen Parametern und starten Sie dieses durch inetd.
</p></li><li><p>
Starten Sie den Befehl: <span><b class="command">nmblookup -B ACLIENT '*'</b></span>
</p><p>
Sie sollten die IP-Adresse Ihres PC's erhalten. Wenn nicht, ist an Ihrem
PC die Software nicht richtig installiert, konfiguriert, nicht
gestartet oder Sie haben den Namen des PC's falsch eingegeben.
</p><p>
Sollte ACLIENT keine DNS-Namensauflösung verwenden, dann benutzen Sie
die IP-Adresse des Clients für den oben genannten Test.
</p></li><li><p>
Starten Sie den Befehl: <span><b class="command">nmblookup -d 2 '*'</b></span>
</p><p>
Dieses Mal versuchen wir dasselbe wie im vorherigen Test, verwenden
aber einen Broadcast über die default Broadcast-Adresse. Es sollten
mehrere NetBios/TCP/IP Rechner im Netzwerk antworten, obwohl Samba nicht
alle Anworten in der kurzen Zeit erwischen kann. Sie sollten folgende
Meldunge von diversen Hosts sehen: &#8220;<span class="quote"><span class="errorname">got a positive name query response</span></span>&#8221;
</p><p>
Sollten hier nicht die gleichen Ergebnisse wie im vorangegangenen Test
erscheinen, dann erkennt nmblookup über seinen Automatismus nicht die
korrekte Broadcast-Adresse.
In diesem Fall sollten Sie mit manuellen Eingriffen für die IP-Adresse,
Broadcast und Netzwerkmaske in <tt class="filename">smb.conf</tt> bei der
<a class="indexterm" name="id2988089"></a><i class="parameter"><tt>interfaces</tt></i>-Option experimentieren.
</p><p>
Sind Ihr PC und Server in verschiedenen Subnetzen, benötigen Sie die
<tt class="option">-B</tt>-Option, um die Broadcast-Adresse des PC-Netzwerkes zu
benutzen.
</p><p>
Dieser Test kann möglicherweise fehlschlagen, wenn Ihre Subnetz-Maske
und Broadcast-Adresse nicht korrekt sind. (Siehe vorherige Anmerkungen zu TEST 3).
</p></li><li><p>
<a class="indexterm" name="id2988137"></a>
Führen Sie folgenden Befehl aus:  <span><b class="command">smbclient //BIGSERVER/TMP</b></span>.
Sie sollten nach einem Password gefragt werden. Verwenden Sie das Password
Ihres aktuellen Accounts auf der Unix-Box. Möchten Sie den Test mit
einem anderen Account durchführen, fügen Sie die <tt class="option">-U accountname</tt>
Option am Ende des Befehls hinzu.
Als Beispiel, <span><b class="command">smbclient //bigserver/tmp -Ujohndoe</b></span>.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Es ist folgendermaßen möglich, das Passwort zusammen mit dem 
Benutzernamen zu vewenden: <span><b class="command">smbclient //bigserver/tmp -Ujohndoe%secret</b></span>.
</p></div><p>
Wenn Sie das Passwort eingegeben haben, erhalten Sie die
<tt class="prompt">smb&gt;</tt> Eingabeauforderung. Wenn nicht, beachten Sie die
Fehlermeldung. Steht dort &#8220;<span class="quote"><span class="errorname">invalid network name</span></span>&#8221;,
dann wurde die Freigabe <i class="parameter"><tt>tmp</tt></i> nicht korrekt 
in der <tt class="filename">smb.conf</tt> eingetragen.
</p><p>
Steht dort &#8220;<span class="quote"><span class="errorname">bad password</span></span>&#8221;, dann
könnte dies folgende Ursachen haben:
</p><div class="orderedlist"><ol type="1"><li><p>
	Sie verwenden shadow-Passwörter (oder ein anderes Passwort-
	System), haben aber keinen Support dafür in <span class="application">smbd</span>
	einkompiliert.
	</p></li><li><p>
	Ihr <a class="indexterm" name="id2988268"></a><i class="parameter"><tt>valid users</tt></i>
	Eintrag ist nicht korrekt.
	</p></li><li><p>
	Sie verwenden Groß/Kleinschreibung im Passwort und haben die
	<a class="indexterm" name="id2988294"></a><i class="parameter"><tt>password level</tt></i>-
	Option nicht dementsprechend angepasst.
	</p></li><li><p>
	Der <a class="indexterm" name="id2988317"></a><i class="parameter"><tt>path</tt></i>-Eintrag in
	<tt class="filename">smb.conf</tt> ist falsch. Überprüfen Sie dies mittels <span class="application">testparm</span>.
	</p></li><li><p>
	Sie haben die Passwortverschlüsselung aktiviert, aber keine Unix-Benutzer
	auf Samba-Benutzer zugeordnet/gemappt.
	Starten Sie: <span><b class="command">smbpasswd -a username</b></span>.
	</p></li></ol></div><p>
Nachdem Sie verbunden sind, sollte es Ihnen möglich sein, die Befehle
<span><b class="command">dir</b></span>, <span><b class="command">get</b></span>,<span><b class="command">put</b></span>
und so weiter aufzurufen. Näheres erfahren Sie durch <span><b class="command">help command</b></span>.
Sie sollten besonders die Anzeige des freien Festplattenplatzes mittels
<span><b class="command">dir</b></span> überprüfen.
</p></li><li><p>
Führen Sie auf Ihrem PC in einer DOS-Eingabeaufforderung/Fenster den Befehl <span><b class="command">net view \\BIGSERVER</b></span> aus.
Sie sollten eine Liste der verfügbaren Freigaben Ihres Servers erhalten.
</p><p>
Erhalten Sie eine Meldung in der Art &#8220;<span class="quote"><span class="errorname">network name not
found</span></span>&#8221;, dann funktioniert Ihre netbios-
Namensauflösung nicht. Das ist überlicherweise ein Problem mit
<span><b class="command">nmbd</b></span>. Um das zu beheben, führen Sie eine der
folgenden Möglichkeiten durch:
</p><div class="orderedlist"><ol type="1"><li><p>
	Korrigieren Sie die Installation von <span class="application">nmbd</span>.
</p></li><li><p>
	Fügen Sie die IP-Adresse von BIGSERVER zu den Einträgen der
	<span><b class="command">wins server</b></span> in die Erweiterte TCP/IP-
	Konfiguration ihres PCs ein.
</p></li><li><p>
	Aktivieren Sie die Windows-Namensauflösung über DNS in der
	Erweiterten Konfiguration des TCP/IP-Setups Ihres PCs.
</p></li><li><p>
	Fügen Sie den Eintrag BIGSERVER zu Ihrer lmhosts-Datei auf dem
	PC hinzu.
</p></li></ol></div><p>
Erhalten Sie die Meldung &#8220;<span class="quote"><span class="errorname">invalid network name</span></span>&#8221; 
oder &#8220;<span class="quote"><span class="errorname">bad password error</span></span>&#8221;,
dann führen Sie die selben Maßnahmen wie für die vorherigen
<span><b class="command">smbclient -L</b></span> Tests durch.
Achten Sie im Besonderen darauf, ob die Einträge in <span><b class="command">hosts allow</b></span> 
richtig sind. (siehe man Hilfeseiten).
</p><p>
Vergessen Sie bitte nicht, dass die Verbindungsanforderung von Ihrem PC
zum Samba-Server immer mit dem aktuellen Benutzername Ihres angemeldeten
Windowsbenutzers durchgeführt wird.
Sie müssen sicherstellen, dass genau dieser Benutzeraccount mit dem
selben Kennwort auch auf Ihrem Samba-Server existiert.
</p><p>
Erhalten Sie eine Meldung in der Art &#8220;<span class="quote"><span class="errorname">specified computer is not receiving requests</span></span>&#8221;
, dann bedeutet dies vermutlich dass der Computer nicht über TCP angesprochen werden
kann. Wenn Ihr Computer TCP-Wrapper einsetzt, fügen Sie für den Client
(oder Subnetz, usw.) einen Eintrag in die Datei <tt class="filename">hosts.allow</tt> hinzu.
</p></li><li><p>
Starten Sie den Befehl: <span><b class="command">net use x: \\BIGSERVER\TMP</b></span>
Sie sollten nach einem Passwort gefragt werden und nach dessen Eingabe
eine Meldung <tt class="computeroutput">command completed successfully</tt> erhalten. 
Sollte das nicht der Fall sein, ist Ihr PC nicht
korrekt installiert oder die Datei <tt class="filename">smb.conf</tt> ist nicht in Ordnung.
Stellen Sie sicher, dass die Einträge in <i class="parameter"><tt>hosts allow</tt></i> korrekt sind 
und die restlichen Einträge in <tt class="filename">smb.conf</tt> stimmen.
</p><p>
Es ist auch möglich dass der Server nicht erkennen kann, unter welchem
Namen Sie sich verbinden.
Um das Problem zu erkennen, fügen Sie die Zeile
<a class="indexterm" name="id2988653"></a><i class="parameter"><tt>user</tt></i> = username
in die <i class="parameter"><tt>[tmp]</tt></i> Sektion der <tt class="filename">smb.conf</tt>
hinzu, wobei <i class="parameter"><tt>username</tt></i> der Benutzername zum
eingegebenem Passwort sein muss. Wenn dass klappt, benötigen Sie die
username mapping Option. 
</p><p>
Es ist auch möglich, dass Ihr Client nur verschlüsselte Passwörter
versendet, aber Sie haben den Eintrag <a class="indexterm" name="id2988697"></a><i class="parameter"><tt>encrypt
passwords</tt></i> = no in der <tt class="filename">smb.conf</tt>
stehen.
Ändern Sie diesen auf "yes", um das Problem zu beheben.
</p></li><li><p>
Führen Sie den Befehl <span><b class="command">nmblookup -M <i class="parameter"><tt>testgroup</tt></i></b></span>
aus, wobei <i class="parameter"><tt>testgroup</tt></i> der Name der Arbeitsgruppe
Ihres Samba-Servers und Ihrer Windows PCs ist. Sie sollten die IP-
Adresse des Masterbrowsers für diese Arbeitsgruppe erhalten.
</p><p>
Wenn nicht, dann ist der Auswahlprozess des Masterbrowsers fehlgeschlagen. 
Warten Sie evtl. noch ein paar Minuten und versuchen Sie es dann nochmal, um zu sehen, ob
es nur etwas langsam ist. Klappt es dann immer noch nicht, werfen Sie
einen Blick auf die browsing-Optionen in der <tt class="filename">smb.conf</tt>.
Stellen Sie sicher, dass Sie <a class="indexterm" name="id2988773"></a><i class="parameter"><tt>preferred master</tt></i> = yes
eingetragen haben, damit beim Starten eine Wahl des Masterbrowsers
durchgeführt wird.
</p></li><li><p>
Durchsuchen Sie Ihre Netzwerkumgebung mit Ihrem Windows Explorer/Dateimanager.
Ihr Samba-Server sollte in der Netzwerkumgebung unter Ihrer lokalen Arbeitsgruppe
(oder welche Sie in der <tt class="filename">smb.conf</tt> eingetragen haben) erscheinen.
Es müsste Ihnen möglich sein, durch einen Doppelklick auf den Namen des
Servers die Liste der Freigaben zu erhalten.
Erhalten Sie eine Fehlermeldung &#8220;<span class="quote">invalid password</span>&#8221;, dann
verwenden Sie möglicherweiße Windows NT, denn das öffnet keinen Server, der
keine verschlüsselten Passwörter unterstützt und sich im User Level Security
Mode befindet.
In diesem Fall tragen Sie 
<a class="indexterm" name="id2988832"></a><i class="parameter"><tt>security</tt></i> = server
und 
<a class="indexterm" name="id2988846"></a><i class="parameter"><tt>password server</tt></i> = Windows_NT_Machine
in Ihre <tt class="filename">smb.conf</tt> ein oder stellen Sie sicher, dass
<a class="indexterm" name="id2988868"></a><i class="parameter"><tt>encrypt passwords</tt></i> auf
&#8220;<span class="quote">yes</span>&#8221; steht.
</p></li></ol></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="troubleshooting.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="troubleshooting.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="problems.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part V. Troubleshooting </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 34. Analyse und Lösung von Problemen mit Samba</td></tr></table></div></body></html>
